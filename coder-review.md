# Code Review

## Общее

- Я во многих местах опущу детские вещи (опечатки и прочее). Где нашел - исправил. Но я буду цепляться к смысловым ошибкам.

## Контроллеры - src/Controller/*:

1) Общее: чрезмерный дубляж кода по сборке ответов. Контроллер НЕ ДОЛЖЕН заниматься сборкой ответа, это прямое нарушение Single Responsibility Principle (далее SRP). Переделано на связку DefaultController, реализующим контракт Responder (в зависимости от используемого паттерна можно реализовать по-разному, тут реализовал просто без Dependency Injection);
2) Общее: Здесь НЕ ДОЛЖЕН лежать код, который не связан с непосредственно контроллерами. Вынес код в src/Infrastructure/Response (по-хорошему еще сделать каталог аля Http, но сейчас излишне);
3) `src/Controller/GetCartController.php`:
   - Нарушение стиля в сигнатуре. Везде `readonly private`, тут `readonly public`. Исправлено на `readonly private`;
   - Миснейминг. Контроллер о добавлении в корзину, а метод почему-то `get`. Исправлено на `add` (по-хорошему, если мы пользуемся односложными контроллерами, то их следует переделать на invokable-реализации);
4) `src/Controller/AddToCartController.php`: еще одно нарушение SRP. Контроллер НЕ ДОЛЖЕН заниматься бизнес-логикой. Здесь почему-то контроллер кладёт данные в корзину, что неприемлемо. Исправлено выносом логики в CartManager (подобнее [в модели](#модель)). 
5) `src/Controller/GetProductsController.php`. Нарушение семантики и информационная несогласованность. Внутри контроллер отдает продукты **по категориям**, а название это не отражает. Переименовано в `GetProductsByCategoryController`.

## Модель

## Представление

- Оба класса CartView и ProductView - отличные примеры дырявой абстракции. Они НЕ ДОЛЖНЫ знать ничего о более высокоуровневом слое (репозитории). Переделал на <ВСТАВИТЬ>

## Postskriptum (не по сути задания)

- migrations/schema.init.sql:7 - в запросе явная ошибка: поля с типом TEXT не поддерживают из коробки default-значения, для этого нужно дополнительно конфигурировать MySQL. Исправил удалением default-выражения. Но потенциально под названия товаров/услуг типа VARCHAR оговоренной длины более чем достаточно, а тип данных TEXT крайне избыточен.
